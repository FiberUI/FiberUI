{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "use-click-outside",
  "type": "registry:hook",
  "title": "useClickOutside",
  "description": "A hook that detects clicks outside of the specified element.",
  "categories": [
    "dom"
  ],
  "files": [
    {
      "path": "dom/use-click-outside.ts",
      "type": "registry:hook",
      "content": "import { RefObject, useEffect, useRef } from \"react\";\n\ntype Handler = (event: MouseEvent | TouchEvent) => void;\n\n/**\n * A hook that detects clicks outside of the specified element and calls the provided handler.\n *\n * @param ref - The ref of the element to detect clicks outside of.\n * @param handler - The function to call when a click outside occurs.\n * @param mouseEvent - The mouse event to listen for. Defaults to \"mousedown\".\n */\nexport function useClickOutside<T extends HTMLElement = HTMLElement>(\n    ref: RefObject<T | null>,\n    handler: Handler,\n    mouseEvent: \"mousedown\" | \"mouseup\" = \"mousedown\",\n): void {\n    const savedHandler = useRef<Handler>(handler);\n\n    // Update the saved handler if it changes, to avoid re-running the effect\n    useEffect(() => {\n        savedHandler.current = handler;\n    }, [handler]);\n\n    useEffect(() => {\n        const listener = (event: MouseEvent | TouchEvent) => {\n            const el = ref?.current;\n\n            // Do nothing if clicking ref's element or descendent elements\n            if (!el || el.contains(event.target as Node)) {\n                return;\n            }\n\n            savedHandler.current(event);\n        };\n\n        document.addEventListener(mouseEvent, listener);\n        document.addEventListener(\"touchstart\", listener);\n\n        return () => {\n            document.removeEventListener(mouseEvent, listener);\n            document.removeEventListener(\"touchstart\", listener);\n        };\n    }, [ref, mouseEvent]);\n}\n"
    }
  ]
}