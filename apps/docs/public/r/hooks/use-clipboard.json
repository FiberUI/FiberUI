{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "use-clipboard",
  "type": "registry:hook",
  "title": "useClipboard",
  "description": "A utility hook for reading and writing to the system clipboard.",
  "categories": [
    "utility"
  ],
  "files": [
    {
      "path": "utility/use-clipboard.ts",
      "type": "registry:hook",
      "content": "import { useState, useCallback } from \"react\";\n\n/**\n * Options for the useClipboard hook\n */\nexport interface UseClipboardOptions {\n    /** Duration in milliseconds before `hasCopied` resets to false (default: 2000) */\n    timeout?: number;\n}\n\n/**\n * Return type for the useClipboard hook\n */\nexport interface UseClipboardReturn {\n    /** Copy text to clipboard */\n    copy: (text: string) => Promise<boolean>;\n    /** Read text from clipboard (requires permission) */\n    read: () => Promise<string | null>;\n    /** Whether copying is in progress */\n    isCopying: boolean;\n    /** Whether text was recently copied (resets after timeout) */\n    hasCopied: boolean;\n    /** The last copied text value */\n    copiedValue: string | null;\n    /** Error if copy/read operation failed */\n    error: Error | null;\n    /** Whether the Clipboard API is supported */\n    isSupported: boolean;\n    /** Reset hasCopied state manually */\n    reset: () => void;\n}\n\n/**\n * A React hook that provides clipboard read/write functionality using the\n * Clipboard API. Includes copy state management for showing feedback to users.\n *\n * @param options - Configuration options for the hook\n * @returns UseClipboardReturn object with copy/read functions and state\n *\n * @example\n * ```tsx\n * const { copy, hasCopied, isSupported } = useClipboard();\n *\n * return (\n *     <button onClick={() => copy(\"Hello, World!\")}>\n *         {hasCopied ? \"Copied!\" : \"Copy\"}\n *     </button>\n * );\n * ```\n */\nexport function useClipboard(\n    options: UseClipboardOptions = {},\n): UseClipboardReturn {\n    const { timeout = 2000 } = options;\n\n    const [isCopying, setIsCopying] = useState(false);\n    const [hasCopied, setHasCopied] = useState(false);\n    const [copiedValue, setCopiedValue] = useState<string | null>(null);\n    const [error, setError] = useState<Error | null>(null);\n\n    // Check if Clipboard API is supported\n    const isSupported =\n        typeof navigator !== \"undefined\" &&\n        \"clipboard\" in navigator &&\n        typeof navigator.clipboard.writeText === \"function\";\n\n    // Reset hasCopied state\n    const reset = useCallback(() => {\n        setHasCopied(false);\n        setCopiedValue(null);\n        setError(null);\n    }, []);\n\n    // Copy text to clipboard\n    const copy = useCallback(\n        async (text: string): Promise<boolean> => {\n            if (!isSupported) {\n                setError(new Error(\"Clipboard API is not supported\"));\n                return false;\n            }\n\n            setIsCopying(true);\n            setError(null);\n\n            try {\n                await navigator.clipboard.writeText(text);\n                setCopiedValue(text);\n                setHasCopied(true);\n\n                // Reset hasCopied after timeout\n                if (timeout > 0) {\n                    setTimeout(() => {\n                        setHasCopied(false);\n                    }, timeout);\n                }\n\n                return true;\n            } catch (err) {\n                const error =\n                    err instanceof Error\n                        ? err\n                        : new Error(\"Failed to copy to clipboard\");\n                setError(error);\n                setHasCopied(false);\n                setCopiedValue(null);\n                return false;\n            } finally {\n                setIsCopying(false);\n            }\n        },\n        [isSupported, timeout],\n    );\n\n    // Read text from clipboard\n    const read = useCallback(async (): Promise<string | null> => {\n        if (!isSupported) {\n            setError(new Error(\"Clipboard API is not supported\"));\n            return null;\n        }\n\n        // Check if readText is available (not all browsers support it)\n        if (typeof navigator.clipboard.readText !== \"function\") {\n            setError(new Error(\"Reading from clipboard is not supported\"));\n            return null;\n        }\n\n        setError(null);\n\n        try {\n            const text = await navigator.clipboard.readText();\n            return text;\n        } catch (err) {\n            const error =\n                err instanceof Error\n                    ? err\n                    : new Error(\"Failed to read from clipboard\");\n            setError(error);\n            return null;\n        }\n    }, [isSupported]);\n\n    return {\n        copy,\n        read,\n        isCopying,\n        hasCopied,\n        copiedValue,\n        error,\n        isSupported,\n        reset,\n    };\n}\n\nexport default useClipboard;\n"
    }
  ]
}