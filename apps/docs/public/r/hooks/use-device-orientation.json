{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "use-device-orientation",
  "type": "registry:hook",
  "title": "useDeviceOrientation",
  "description": "A hook to access the device's physical orientation.",
  "categories": [
    "device"
  ],
  "files": [
    {
      "path": "device/use-device-orientation.ts",
      "type": "registry:hook",
      "content": "import { useState, useCallback, useEffect } from \"react\";\n\n/**\n * Orientation data return type\n */\nexport interface DeviceOrientationState {\n    /** The correlation of the device's Z axis to the Earth's Z axis (0 to 360)  */\n    alpha: number | null;\n    /** The inclination value (forward vs backward) (-180 to 180) */\n    beta: number | null;\n    /** The inclination value (left vs right) (-90 to 90) */\n    gamma: number | null;\n    /** Whether the data provided is absolute */\n    absolute: boolean;\n}\n\n/**\n * Return type for the useDeviceOrientation hook\n */\nexport interface UseDeviceOrientationReturn {\n    /** Current orientation state */\n    orientation: DeviceOrientationState;\n    /** Error state if any */\n    error: Error | null;\n    /** Request permission (required for iOS 13+) */\n    requestPermission: () => Promise<boolean>;\n    /** Whether the API is supported */\n    isSupported: boolean;\n}\n\n// Add iOS-specific types\ninterface DeviceOrientationEventiOS extends DeviceOrientationEvent {\n    requestPermission?: () => Promise<\"granted\" | \"denied\">;\n}\n\n/**\n * A React hook that provides access to the device's physical orientation.\n * Handles permission requests for iOS 13+ devices.\n *\n * @returns UseDeviceOrientationReturn object with orientation data and controls\n */\nexport function useDeviceOrientation(): UseDeviceOrientationReturn {\n    const [orientation, setOrientation] = useState<DeviceOrientationState>({\n        alpha: null,\n        beta: null,\n        gamma: null,\n        absolute: false,\n    });\n    const [error, setError] = useState<Error | null>(null);\n\n    // Check support\n    const isSupported =\n        typeof window !== \"undefined\" && \"DeviceOrientationEvent\" in window;\n\n    // Handle orientation change\n    const handleOrientation = useCallback((event: DeviceOrientationEvent) => {\n        setOrientation({\n            alpha: event.alpha,\n            beta: event.beta,\n            gamma: event.gamma,\n            absolute: event.absolute,\n        });\n    }, []);\n\n    // Request permission (iOS 13+)\n    const requestPermission = useCallback(async (): Promise<boolean> => {\n        if (!isSupported) {\n            setError(new Error(\"DeviceOrientationEvent is not supported\"));\n            return false;\n        }\n\n        try {\n            // Check for iOS 13+ permission API\n            const EventCast =\n                DeviceOrientationEvent as unknown as DeviceOrientationEventiOS;\n\n            if (typeof EventCast.requestPermission === \"function\") {\n                const state = await EventCast.requestPermission();\n                if (state === \"granted\") {\n                    window.addEventListener(\n                        \"deviceorientation\",\n                        handleOrientation,\n                    );\n                    return true;\n                } else {\n                    setError(new Error(\"Permission denied\"));\n                    return false;\n                }\n            }\n\n            // Non-iOS 13+ devices don't need permission\n            // Or if permission was already granted previously\n            return true;\n        } catch (err) {\n            const error =\n                err instanceof Error\n                    ? err\n                    : new Error(\"Failed to request permission\");\n            setError(error);\n            return false;\n        }\n    }, [isSupported, handleOrientation]);\n\n    useEffect(() => {\n        if (!isSupported) return;\n\n        // On mount, try to add listener (works if no permission needed or already granted)\n        // For iOS 13+, this might do nothing until requestPermission is called\n        window.addEventListener(\"deviceorientation\", handleOrientation);\n\n        return () => {\n            window.removeEventListener(\"deviceorientation\", handleOrientation);\n        };\n    }, [isSupported, handleOrientation]);\n\n    return {\n        orientation,\n        error,\n        requestPermission,\n        isSupported,\n    };\n}\n\nexport default useDeviceOrientation;\n"
    }
  ]
}