{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "use-event-listener",
  "type": "registry:hook",
  "title": "useEventListener",
  "description": "A type-safe hook for attaching event listeners to window, document, or any HTML element.",
  "categories": [
    "dom"
  ],
  "files": [
    {
      "path": "dom/use-event-listener.ts",
      "type": "registry:hook",
      "content": "import { RefObject, useEffect, useRef } from \"react\";\n\n/**\n * Check if code is running in a browser environment.\n * This ensures SSR compatibility.\n */\nconst isBrowser = typeof window !== \"undefined\";\n\n/**\n * Extended options for useEventListener\n */\nexport interface EventListenerOptions extends AddEventListenerOptions {\n    /** Prevent default browser behavior when event fires */\n    preventDefault?: boolean;\n    /** Stop event propagation when event fires */\n    stopPropagation?: boolean;\n}\n\n/**\n * Attaches an event listener to the window.\n *\n * @param eventName - The event name (e.g., 'resize', 'scroll', 'keydown').\n * @param handler - Callback function invoked when the event fires.\n * @param element - Leave undefined to attach to window.\n * @param options - Extended addEventListener options with preventDefault/stopPropagation.\n */\nexport function useEventListener<K extends keyof WindowEventMap>(\n    eventName: K,\n    handler: (event: WindowEventMap[K]) => void,\n    element?: null,\n    options?: boolean | EventListenerOptions,\n): void;\n\n/**\n * Attaches an event listener to the document.\n *\n * @param eventName - The event name (e.g., 'visibilitychange', 'fullscreenchange').\n * @param handler - Callback function invoked when the event fires.\n * @param element - Pass \"document\" string to attach to document.\n * @param options - Extended addEventListener options with preventDefault/stopPropagation.\n */\nexport function useEventListener<K extends keyof DocumentEventMap>(\n    eventName: K,\n    handler: (event: DocumentEventMap[K]) => void,\n    element: \"document\",\n    options?: boolean | EventListenerOptions,\n): void;\n\n/**\n * Attaches an event listener to an HTML element via ref.\n *\n * @param eventName - The event name (e.g., 'click', 'mouseenter', 'focus').\n * @param handler - Callback function invoked when the event fires.\n * @param element - A React ref pointing to the target element.\n * @param options - Extended addEventListener options with preventDefault/stopPropagation.\n */\nexport function useEventListener<\n    K extends keyof HTMLElementEventMap,\n    T extends HTMLElement,\n>(\n    eventName: K,\n    handler: (event: HTMLElementEventMap[K]) => void,\n    element: RefObject<T | null>,\n    options?: boolean | EventListenerOptions,\n): void;\n\n/**\n * Implementation\n */\nexport function useEventListener(\n    eventName: string,\n    handler: (event: Event) => void,\n    element?: RefObject<HTMLElement | null> | \"document\" | null,\n    options?: boolean | EventListenerOptions,\n): void {\n    // Store handler in ref to avoid effect re-runs when handler changes\n    const handlerRef = useRef(handler);\n\n    useEffect(() => {\n        handlerRef.current = handler;\n    }, [handler]);\n\n    useEffect(() => {\n        // SSR guard\n        if (!isBrowser) return;\n\n        // Resolve the target\n        const target =\n            element === \"document\" ? document : (element?.current ?? window);\n\n        // Guard against null refs\n        if (!target) return;\n\n        // Extract custom options\n        const extendedOptions = typeof options === \"object\" ? options : {};\n        const { preventDefault, stopPropagation, ...nativeOptions } =\n            extendedOptions;\n\n        // Wrapper that calls the latest handler with optional prevent/stop\n        const listener = (event: Event) => {\n            if (preventDefault) event.preventDefault();\n            if (stopPropagation) event.stopPropagation();\n            handlerRef.current(event);\n        };\n\n        const listenerOptions =\n            typeof options === \"boolean\" ? options : nativeOptions;\n\n        target.addEventListener(eventName, listener, listenerOptions);\n\n        return () => {\n            target.removeEventListener(eventName, listener, listenerOptions);\n        };\n    }, [eventName, element, options]);\n}\n"
    }
  ]
}