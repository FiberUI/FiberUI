{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "use-eye-dropper",
  "type": "registry:hook",
  "title": "useEyeDropper",
  "description": "A utility hook for selecting colors using the EyeDropper API.",
  "categories": [
    "utility"
  ],
  "files": [
    {
      "path": "utility/use-eye-dropper.ts",
      "type": "registry:hook",
      "content": "import { useState, useCallback } from \"react\";\n\n/**\n * Options for opening the EyeDropper\n */\nexport interface UseEyeDropperOptions {\n    /** Signal to abort the selection */\n    signal?: AbortSignal;\n}\n\n/**\n * Result from the EyeDropper API\n */\nexport interface EyeDropperResult {\n    /** The selected color in hex sRGB format (e.g. #ff0000) */\n    sRGBHex: string;\n}\n\n/**\n * Return type for the useEyeDropper hook\n */\nexport interface UseEyeDropperReturn {\n    /** Open the eye dropper to select a color */\n    open: (options?: UseEyeDropperOptions) => Promise<EyeDropperResult | null>;\n    /** Whether the EyeDropper API is supported */\n    isSupported: boolean;\n    /** Whether the eye dropper is currently open */\n    isLoading: boolean;\n    /** The last selected color */\n    color: string | null;\n    /** Error from the last operation */\n    error: Error | null;\n}\n\n// Add type definition for EyeDropper if not present in environment\ninterface EyeDropper {\n    open(options?: { signal?: AbortSignal }): Promise<{ sRGBHex: string }>;\n}\n\ninterface EyeDropperConstructor {\n    new (): EyeDropper;\n    prototype: EyeDropper;\n}\n\ndeclare global {\n    interface Window {\n        EyeDropper?: EyeDropperConstructor;\n    }\n}\n\n/**\n * A React hook for using the EyeDropper API to select colors from the screen.\n *\n * @returns UseEyeDropperReturn object with open function and state\n *\n * @example\n * ```tsx\n * const { open, color, isSupported } = useEyeDropper();\n *\n * return (\n *     <div>\n *         <button onClick={open} disabled={!isSupported}>Pick Color</button>\n *         {color && <div style={{ backgroundColor: color }}>Selected: {color}</div>}\n *     </div>\n * );\n * ```\n */\nexport function useEyeDropper(): UseEyeDropperReturn {\n    const [isLoading, setIsLoading] = useState(false);\n    const [error, setError] = useState<Error | null>(null);\n    const [color, setColor] = useState<string | null>(null);\n\n    // Check support\n    const isSupported = typeof window !== \"undefined\" && \"EyeDropper\" in window;\n\n    // Open eye dropper\n    const open = useCallback(\n        async (\n            options?: UseEyeDropperOptions,\n        ): Promise<EyeDropperResult | null> => {\n            if (!isSupported) {\n                setError(new Error(\"EyeDropper API is not supported\"));\n                return null;\n            }\n\n            setIsLoading(true);\n            setError(null);\n\n            try {\n                // @ts-ignore - EyeDropper is experimental\n                const eyeDropper = new window.EyeDropper();\n                const result = await eyeDropper.open(options);\n                setColor(result.sRGBHex);\n                return result;\n            } catch (err) {\n                // User cancelation is common error\n                const error =\n                    err instanceof Error\n                        ? err\n                        : new Error(\"Failed to pick color\");\n                setError(error);\n                return null;\n            } finally {\n                setIsLoading(false);\n            }\n        },\n        [isSupported],\n    );\n\n    return {\n        open,\n        isSupported,\n        isLoading,\n        color,\n        error,\n    };\n}\n\nexport default useEyeDropper;\n"
    }
  ]
}